<div [class]="loaderClass" [attr.data-text]="[loaderText]"></div>
<form id="dataset-create" class="create-section" (ngSubmit)="onSubmit(createForm)" #createForm="ngForm">
  <div class="form-horizontal create-table">
    <div class="form-group">
      <label for="dataset-name" class="col-sm-2 control-label">数据集名称</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="dataset-name" name="dataset-name" [(ngModel)]="datasetName" placeholder="数据集名称">
      </div>
    </div>
    <div class="form-group">
      <label for="description" class="col-sm-2 control-label">数据集相关描述</label>
      <div class="col-sm-10">
        <textarea class="form-control" id="description" name="dataset-des" [(ngModel)]="datasetDes" placeholder="数据集相关描述"></textarea>
      </div>
    </div>
    <div class="form-group">
      <label for="format-des" class="col-sm-2 control-label">格式说明</label>
      <div class="col-sm-10">
        <textarea class="form-control" id="format-des" name="dataset-des" [(ngModel)]="formatDes" placeholder="格式相关描述"></textarea>
      </div>
    </div>
    <div class="form-group">
      <label for="format-table" class="col-sm-2 control-label">表格属性</label>
      <div class="col-sm-10">
        <button id="format-table" type="button" class="btn-cta-secondary" (click)="createDbTitileModal.show()">添加</button>
        <br>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th *ngFor="let key of keys">{{key.colName}}({{key.keyType}})</th>
            </tr>
          </thead>
        </table>
      </div>
    </div>
    <div class="form-group">
      <label for="attr-flag" class="col-sm-2 control-label">使用限制属性</label>
      <div class="col-sm-10">
        <input type="checkbox" id="attr-flag" name="attr-flag" [(ngModel)]="attrFlag">
        <div *ngIf="attrFlag">
          <!--<butcolTypetype="button" class="btn-cta-secondary" id="add-attr-button" (click)="createLimitedModal.show()">添加</button>-->
          <table class="table table-bordered">
            <tbody>
              <tr *ngFor="let key of keys">
                <th>{{key.colName}}({{key.colType}})</th>
                <th>
                  <select name="limited" id="limited" multiple="multiple" class="form-control" [(ngModel)]="key.limits">
                    <option [ngValue]="1">平均值</option>
                    <option [ngValue]="2">方差</option>
                    <option [ngValue]="3">标准差</option>
                  </select>
                </th>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="form-group" id="upload-form">
      <label for="upload" class="col-sm-2 control-label">上传封面</label>
      <div class="col-sm-10">
        <input type="file" id="upload" name="cover" ng2FileSelect [uploader]="uploader" (change)="uploadCover($event)" />
      </div>
    </div>
  </div>
  <div class="buttons">
    <button type="button" class="btn-cta-primary">取消</button>
    <button type="submit" class="btn-cta-secondary">提交</button>
  </div>
</form>

<!--创建数据库表名-->
<div bsModal #createDbTitileModal="bs-modal" class="modal fade" style="top: 20%" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title pull-left">创建键值对</h4>
        <button type="button" class="close pull-right" (click)="createLimitedModal.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="key-name">键值名</label>
          <input type="text" class="form-control" id="key-name" [(ngModel)]="keyName">
        </div>
        <div class="form-group">
          <label for="key-type">类型</label>
          <br>
          <select name="key-type" id="key-type" [(ngModel)]="keyType" class="form-control">
            <option [ngValue]="1">String</option>
            <option [ngValue]="2">Integer</option>
            <option [ngValue]="3">Double</option>
            <option [ngValue]="4">Char</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" type="submit" (click)="addKey(); createDbTitileModal.hide();">确定</button>
        <button class="btn btn-danger"  type="button" (click)="createDbTitileModal.hide()">取消</button>
      </div>
    </div>
  </div>
</div>